# ---------- Core ----------
PROJECT_SLUG=family-hub

# ---------- Postgres ----------
# 容器内访问（Docker Compose 网络）：host 使用容器名 postgres
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=family_hub
POSTGRES_USER=family_hub
POSTGRES_PASSWORD=change_me_dev

# 容器内（Compose）运行 apps/api / apps/worker 时应使用此连接串：
DATABASE_URL=postgresql://family_hub:change_me_dev@postgres:5432/family_hub

# ------------------------------
# 宿主机直跑提示（重要）
# ------------------------------
# 如果你在宿主机（非容器）直接运行 pnpm dev / nest start，
# 那么 host=postgres 将无法解析（因为 postgres 是容器网络内的服务名）。
# 此时请改用 localhost（并确保 docker-compose.dev.yml 已暴露 5432:5432）：
#
# DATABASE_URL=postgresql://family_hub:change_me_dev@localhost:5432/family_hub
#
# 你也可以保留两份变量（按需切换）：
DATABASE_URL_DOCKER=postgresql://family_hub:change_me_dev@postgres:5432/family_hub
DATABASE_URL_LOCAL=postgresql://family_hub:change_me_dev@localhost:5432/family_hub

# ---------- Redis ----------
REDIS_PASSWORD=change_me_dev
# 容器内默认使用 redis://redis:6379/0；宿主机直跑可改为 redis://localhost:6379/0
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
REDIS_URL_LOCAL=redis://:${REDIS_PASSWORD}@localhost:6379/0

# ---------- AI Gateway ----------
AI_MODE=cloud
AI_GATEWAY_URL=http://ai-gateway:3100

# Cloud model config (placeholders)
CLOUD_API_KEY=change_me_dev
CLOUD_TEXT_MODEL=change_me_dev
CLOUD_VISION_MODEL=change_me_dev

# Local LLM (future)
LOCAL_LLM_ENDPOINT=http://ollama:11434

# ---------- Ports (for containers) ----------
API_PORT=3000
AI_GATEWAY_PORT=3100
WORKER_PORT=3200
WEB_PORT=5173

# ---------- Web (browser-side dev access) ----------
# 浏览器访问 API 一般走宿主机端口映射，因此默认 localhost
VITE_API_BASE_URL=http://localhost:3000
