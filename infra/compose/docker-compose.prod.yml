services:
  postgres:
    volumes:
      - /volume1/docker/family/postgres:/var/lib/postgresql/data

  redis:
    volumes:
      - /volume1/docker/family/redis:/data

  ai-gateway:
    image: ghcr.io/a978182295-stack/family-hub-ai-gateway:prod

  api:
    image: ghcr.io/a978182295-stack/family-hub-api:prod

  worker:
    image: ghcr.io/a978182295-stack/family-hub-worker:prod

  web:
    image: ghcr.io/a978182295-stack/family-hub-web:prod
    ports:
      - "${WEB_PORT:-8080}:80"
    depends_on:
      api:
        condition: service_healthy
